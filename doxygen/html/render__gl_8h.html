<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AstraPlay: F:/QtProject/AstraPlay/src/include/mpv/render_gl.h 文件参考</title>
<link rel="icon" href="AstraPlay_Logo_Small.png" type="image/x-icon" />
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="AstraPlay_Logo_Small.png"/></td>
  <td id="projectalign">
   <div id="projectname">AstraPlay<span id="projectnumber">&#160;v1.0.2</span>
   </div>
   <div id="projectbrief">基于libmpv与Qt5框架的视频播放器</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.10.0 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>首页</span></a></li>
      <li><a href="pages.html"><span>相关页面</span></a></li>
      <li><a href="namespaces.html"><span>命名空间</span></a></li>
      <li><a href="annotated.html"><span>类</span></a></li>
      <li class="current"><a href="files.html"><span>文件</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>文件列表</span></a></li>
      <li><a href="globals.html"><span>文件成员</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b0856f6b0d80ccb263b2f415c91f9e17.html">include</a></li><li class="navelem"><a class="el" href="dir_85e4b8678a4e308299dd4557438491b5.html">mpv</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">类</a> &#124;
<a href="#define-members">宏定义</a> &#124;
<a href="#typedef-members">类型定义</a>  </div>
  <div class="headertitle"><div class="title">render_gl.h 文件参考</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="render_8h_source.html">render.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
render_gl.h 的引用(Include)关系图:</div>
<div class="dyncontent">
<div class="center"><img src="render__gl_8h__incl.png" border="0" usemap="#a_f_1_2_qt_project_2_astra_play_2src_2include_2mpv_2render__gl_8h" alt=""/></div>
<map name="a_f_1_2_qt_project_2_astra_play_2src_2include_2mpv_2render__gl_8h" id="a_f_1_2_qt_project_2_astra_play_2src_2include_2mpv_2render__gl_8h">
<area shape="rect" title=" " alt="" coords="5,5,189,48"/>
<area shape="rect" href="render_8h.html" title=" " alt="" coords="63,96,131,123"/>
<area shape="poly" title=" " alt="" coords="100,49,100,80,94,80,94,49"/>
<area shape="rect" href="client_8h.html" title=" " alt="" coords="65,171,129,197"/>
<area shape="poly" title=" " alt="" coords="100,123,100,155,94,155,94,123"/>
<area shape="rect" title=" " alt="" coords="19,245,87,272"/>
<area shape="poly" title=" " alt="" coords="92,199,71,233,66,231,87,196"/>
<area shape="rect" title=" " alt="" coords="110,245,175,272"/>
<area shape="poly" title=" " alt="" coords="107,196,129,231,124,233,103,199"/>
</map>
</div>
</div>
<p><a href="render__gl_8h_source.html">浏览源代码.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
类</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmpv__opengl__init__params.html">mpv_opengl_init_params</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmpv__opengl__fbo.html">mpv_opengl_fbo</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmpv__opengl__drm__params.html">mpv_opengl_drm_params</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmpv__opengl__drm__draw__surface__size.html">mpv_opengl_drm_draw_surface_size</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structmpv__opengl__drm__params__v2.html">mpv_opengl_drm_params_v2</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
宏定义</h2></td></tr>
<tr class="memitem:a44675acc2146f51d2a960392a9ac37f5" id="r_a44675acc2146f51d2a960392a9ac37f5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a44675acc2146f51d2a960392a9ac37f5">mpv_opengl_drm_osd_size</a>&#160;&#160;&#160;<a class="el" href="structmpv__opengl__drm__draw__surface__size.html">mpv_opengl_drm_draw_surface_size</a></td></tr>
<tr class="separator:a44675acc2146f51d2a960392a9ac37f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
类型定义</h2></td></tr>
<tr class="memitem:ad3755ccf4ca29d3e7d48c7512eb97315" id="r_ad3755ccf4ca29d3e7d48c7512eb97315"><td class="memItemLeft" align="right" valign="top">typedef struct mpv_opengl_init_params&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad3755ccf4ca29d3e7d48c7512eb97315">mpv_opengl_init_params</a></td></tr>
<tr class="separator:ad3755ccf4ca29d3e7d48c7512eb97315"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90f643f33ecb6e6b5e5821464a048b60" id="r_a90f643f33ecb6e6b5e5821464a048b60"><td class="memItemLeft" align="right" valign="top">typedef struct mpv_opengl_fbo&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a90f643f33ecb6e6b5e5821464a048b60">mpv_opengl_fbo</a></td></tr>
<tr class="separator:a90f643f33ecb6e6b5e5821464a048b60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb0d2e008746297f2bc6869aa5d09749" id="r_abb0d2e008746297f2bc6869aa5d09749"><td class="memItemLeft" align="right" valign="top">typedef struct mpv_opengl_drm_params&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#abb0d2e008746297f2bc6869aa5d09749">mpv_opengl_drm_params</a></td></tr>
<tr class="separator:abb0d2e008746297f2bc6869aa5d09749"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6e5dc81224318339c0bedc4df24e3c9" id="r_ad6e5dc81224318339c0bedc4df24e3c9"><td class="memItemLeft" align="right" valign="top">typedef struct mpv_opengl_drm_draw_surface_size&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad6e5dc81224318339c0bedc4df24e3c9">mpv_opengl_drm_draw_surface_size</a></td></tr>
<tr class="separator:ad6e5dc81224318339c0bedc4df24e3c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21131beed2818fd94fff00076f956363" id="r_a21131beed2818fd94fff00076f956363"><td class="memItemLeft" align="right" valign="top">typedef struct mpv_opengl_drm_params_v2&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a21131beed2818fd94fff00076f956363">mpv_opengl_drm_params_v2</a></td></tr>
<tr class="separator:a21131beed2818fd94fff00076f956363"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">宏定义说明</h2>
<a id="a44675acc2146f51d2a960392a9ac37f5" name="a44675acc2146f51d2a960392a9ac37f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44675acc2146f51d2a960392a9ac37f5">&#9670;&#160;</a></span>mpv_opengl_drm_osd_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define mpv_opengl_drm_osd_size&#160;&#160;&#160;<a class="el" href="structmpv__opengl__drm__draw__surface__size.html">mpv_opengl_drm_draw_surface_size</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For backwards compatibility with the old naming of <a class="el" href="structmpv__opengl__drm__draw__surface__size.html">mpv_opengl_drm_draw_surface_size</a> </p>

<p class="definition">在文件 <a class="el" href="render__gl_8h_source.html">render_gl.h</a> 第 <a class="el" href="render__gl_8h_source.html#l00205">205</a> 行定义.</p>

</div>
</div>
<h2 class="groupheader">类型定义说明</h2>
<a id="ad6e5dc81224318339c0bedc4df24e3c9" name="ad6e5dc81224318339c0bedc4df24e3c9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6e5dc81224318339c0bedc4df24e3c9">&#9670;&#160;</a></span>mpv_opengl_drm_draw_surface_size</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct mpv_opengl_drm_draw_surface_size mpv_opengl_drm_draw_surface_size</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For MPV_RENDER_PARAM_DRM_DRAW_SURFACE_SIZE. </p>

</div>
</div>
<a id="abb0d2e008746297f2bc6869aa5d09749" name="abb0d2e008746297f2bc6869aa5d09749"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb0d2e008746297f2bc6869aa5d09749">&#9670;&#160;</a></span>mpv_opengl_drm_params</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct mpv_opengl_drm_params mpv_opengl_drm_params</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deprecated. For MPV_RENDER_PARAM_DRM_DISPLAY. </p>

</div>
</div>
<a id="a21131beed2818fd94fff00076f956363" name="a21131beed2818fd94fff00076f956363"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21131beed2818fd94fff00076f956363">&#9670;&#160;</a></span>mpv_opengl_drm_params_v2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct mpv_opengl_drm_params_v2 mpv_opengl_drm_params_v2</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For MPV_RENDER_PARAM_DRM_DISPLAY_V2. </p>

</div>
</div>
<a id="a90f643f33ecb6e6b5e5821464a048b60" name="a90f643f33ecb6e6b5e5821464a048b60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90f643f33ecb6e6b5e5821464a048b60">&#9670;&#160;</a></span>mpv_opengl_fbo</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct mpv_opengl_fbo mpv_opengl_fbo</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For MPV_RENDER_PARAM_OPENGL_FBO. </p>

</div>
</div>
<a id="ad3755ccf4ca29d3e7d48c7512eb97315" name="ad3755ccf4ca29d3e7d48c7512eb97315"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3755ccf4ca29d3e7d48c7512eb97315">&#9670;&#160;</a></span>mpv_opengl_init_params</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct mpv_opengl_init_params mpv_opengl_init_params</td>
        </tr>
      </table>
</div><div class="memdoc">
<h2><a class="anchor" id="autotoc_md16"></a>
OpenGL backend</h2>
<p>This header contains definitions for using OpenGL with the <a class="el" href="render_8h.html">render.h</a> API.</p>
<h2><a class="anchor" id="autotoc_md17"></a>
OpenGL interop</h2>
<p>The OpenGL backend has some special rules, because OpenGL itself uses implicit per-thread contexts, which causes additional API problems.</p>
<p>This assumes the OpenGL context lives on a certain thread controlled by the API user. All mpv_render_* APIs have to be assumed to implicitly use the OpenGL context if you pass a mpv_render_context using the OpenGL backend, unless specified otherwise.</p>
<p>The OpenGL context is indirectly accessed through the OpenGL function pointers returned by the get_proc_address callback in <a class="el" href="structmpv__opengl__init__params.html">mpv_opengl_init_params</a>. Generally, mpv will not load the system OpenGL library when using this API.</p>
<h2><a class="anchor" id="autotoc_md18"></a>
OpenGL state</h2>
<p>OpenGL has a large amount of implicit state. All the mpv functions mentioned above expect that the OpenGL state is reasonably set to OpenGL standard defaults. Likewise, mpv will attempt to leave the OpenGL context with standard defaults. The following state is excluded from this: </p><pre class="fragment"> - the glViewport state
 - the glScissor state (but GL_SCISSOR_TEST is in its default value)
 - glBlendFuncSeparate() state (but GL_BLEND is in its default value)
 - glClearColor() state
 - mpv may overwrite the callback set with glDebugMessageCallback()
 - mpv always disables GL_DITHER at init
</pre><p> Messing with the state could be avoided by creating shared OpenGL contexts, but this is avoided for the sake of compatibility and interoperability.</p>
<p>On OpenGL 2.1, mpv will strictly call functions like glGenTextures() to create OpenGL objects. You will have to do the same. This ensures that objects created by mpv and the API users don't clash. Also, legacy state must be either in its defaults, or not interfere with core state.</p>
<h2><a class="anchor" id="autotoc_md19"></a>
API use</h2>
<p>The mpv_render_* API is used. That API supports multiple backends, and this section documents specifics for the OpenGL backend.</p>
<p>Use <a class="el" href="render_8h.html#a6326414507775cef9b21b5bbee1553d8">mpv_render_context_create()</a> with MPV_RENDER_PARAM_API_TYPE set to MPV_RENDER_API_TYPE_OPENGL, and MPV_RENDER_PARAM_OPENGL_INIT_PARAMS provided.</p>
<p>Call <a class="el" href="render_8h.html#ac60a37eba7ff4e48613ecde542ea62c7">mpv_render_context_render()</a> with MPV_RENDER_PARAM_OPENGL_FBO to render the video frame to an FBO.</p>
<h2><a class="anchor" id="autotoc_md20"></a>
Hardware decoding</h2>
<p>Hardware decoding via this API is fully supported, but requires some additional setup. (At least if direct hardware decoding modes are wanted, instead of copying back surface data from GPU to CPU RAM.)</p>
<p>There may be certain requirements on the OpenGL implementation:</p>
<ul>
<li>Windows: ANGLE is required (although in theory GL/DX interop could be used)</li>
<li>Intel/Linux: EGL is required, and also the native display resource needs to be provided (e.g. MPV_RENDER_PARAM_X11_DISPLAY for X11 and MPV_RENDER_PARAM_WL_DISPLAY for Wayland)</li>
<li>nVidia/Linux: Both GLX and EGL should work (GLX is required if vdpau is used, e.g. due to old drivers.)</li>
<li>OSX: CGL is required (CGLGetCurrentContext() returning non-NULL)</li>
<li>iOS: EAGL is required (EAGLContext.currentContext returning non-nil)</li>
</ul>
<p>Once these things are setup, hardware decoding can be enabled/disabled at any time by setting the "hwdec" property. For initializing the mpv OpenGL state via MPV_RENDER_PARAM_OPENGL_INIT_PARAMS. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
